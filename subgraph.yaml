specVersion: 0.0.3
description: A secure & decentralized way to address resources on and off the blockchain using simple, human-readable names. Access domains and transfer history.
repository: https://github.com/ensdomains/ens-subgraph
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: ENSRegistry
    network: rinkeby
    source:
      address: '0xe7410170f87102df0055eb195163a03b7f2bff4a'
      abi: EnsRegistry
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.2
      language: wasm/assemblyscript
      file: ./src/ensRegistry.ts
      entities:
        - Domain
        - Account
        - Resolver
      abis:
        - name: EnsRegistry
          file: ./abis/Registry.json
      eventHandlers:
        - event: Transfer(bytes32,address)
          handler: handleTransfer
        - event: NewOwner(bytes32,bytes32,address)
          handler: handleNewOwner
        - event: NewResolver(bytes32,address)
          handler: handleNewResolver
        - event: NewTTL(bytes32,uint64)
          handler: handleNewTTL
  - kind: ethereum/contract
    name: Resolver
    network: rinkeby
    source:
      abi: Resolver
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.2
      language: wasm/assemblyscript
      file: ./src/resolver.ts
      entities:
        - AddrChanged
        - NameChanged
        - AbiChanged
        - PubkeyChanged
        - Textchanged
        - ContenthashChanged
        - InterfaceChanged
        - AuthorisationChanged
      abis:
        - name: Resolver
          file: ./abis/PublicResolver.json
      eventHandlers:
        - event: ABIChanged(bytes32,uint256)
          handler: handleABIChanged
        - event: AddrChanged(bytes32,address)
          handler: handleAddrChanged
        - event: AuthorisationChanged(bytes32,address,address,bool)
          handler: handleAuthorisationChanged
        - event: ContenthashChanged(bytes32,bytes)
          handler: handleContentHashChanged
        - event: InterfaceChanged(bytes32,bytes4,address)
          handler: handleInterfaceChanged
        - event: NameChanged(bytes32,string)
          handler: handleNameChanged
        - event: PubkeyChanged(bytes32,bytes32,bytes32)
          handler: handlePubkeyChanged
        - event: TextChanged(bytes32,string,string)
          handler: handleTextChanged
  # - kind: ethereum/contract
  #   name: AuctionRegistrar
  #   network: rinkeby
  #   source:
  #     address: '0x6090a6e47849629b7245dfa1ca21d94cd15878ef'
  #     abi: AuctionRegistrar
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.2
  #     language: wasm/assemblyscript
  #     file: ./src/auctionRegistrar.ts
  #     entities:
  #       - Account
  #       - AuctionedName
  #       - Deed
  #     abis:
  #       - name: AuctionRegistrar
  #         file: ./abis/AuctionRegistrar.json
  #     eventHandlers:
  #       - event: AuctionStarted(bytes32,uint256)
  #         handler: auctionStarted
  #       - event: BidRevealed(bytes32,address,uint256,uint8)
  #         handler: bidRevealed
  #       - event: HashRegistered(bytes32,address,uint256,uint256)
  #         handler: hashRegistered
  #       - event: HashInvalidated(bytes32,string,uint256,uint256)
  #         handler: hashInvalidated
  #       - event: HashReleased(bytes32,uint256)
  #         handler: hashReleased
  - kind: ethereum/contract
    name: BaseRegistrar
    network: rinkeby
    source:
      address: '0x53CEb15b76023FBEC5Bb39450214926F6aA77d2e'
      abi: BaseRegistrar
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.2
      language: wasm/assemblyscript
      file: ./src/ethRegistrar.ts
      entities:
        - Registration
        - NameRegistered
        - NameMigrated
        - NameRenewed
      abis:
        - name: BaseRegistrar
          file: ./abis/BaseRegistrar.json
      eventHandlers:
        - event: NameMigrated(uint256,address,uint256)
          handler: handleNameMigrated
        - event: NameRegistered(uint256,address,uint256)
          handler: handleNameRegistered
        - event: NameRenewed(uint256,uint256)
          handler: handleNameRenewed
  - kind: ethereum/contract
    name: EthRegistrarController
    network: rinkeby
    source:
      address: '0x089379Eb19916742Cbb474752c2704bF16bEc54F'
      abi: EthRegistrarController
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.2
      language: wasm/assemblyscript
      file: ./src/ethRegistrar.ts
      entities:
        - Registration
      abis:
        - name: EthRegistrarController
          file: ./abis/EthRegistrarController.json
      eventHandlers:
        - event: NameRegistered(string,bytes32,address,uint256,uint256)
          handler: handleNameRegisteredByController
  # - kind: ethereum/contract
  #   name: Deed
  #   network: rinkeby
  #   source:
  #     abi: Deed
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.2
  #     language: wasm/assemblyscript
  #     file: ./src/auctionRegistrar.ts
  #     entities:
  #       - AuctionedName
  #     abis:
  #       - name: Deed
  #         file: ./abis/Deed.json
  #     eventHandlers:
  #       - event: OwnerChanged(address)
  #         handler: deedTransferred
